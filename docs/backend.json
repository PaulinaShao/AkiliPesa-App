
{
  "entities": {
    "UserProfile": {
      "title": "User Profile",
      "description": "Represents a user of the AkiliPesa application.",
      "type": "object",
      "properties": {
        "uid": { "type": "string", "description": "Unique identifier for the User entity." },
        "displayName": { "type": "string", "description": "The user's display name." },
        "email": { "type": "string", "description": "The user's email address.", "format": "email" },
        "plan": { "type": "string", "enum": ["free", "starter", "pro", "vip"], "description": "User's subscription plan." },
        "wallet_balance": { "type": "number", "description": "The user's current wallet balance." },
        "createdAt": { "type": "string", "format": "date-time" },
        "updatedAt": { "type": "string", "format": "date-time" }
      },
      "required": ["uid", "displayName", "email", "plan"]
    },
    "Wallet": {
        "title": "User Wallet",
        "description": "Represents a user's wallet.",
        "type": "object",
        "properties": {
            "uid": { "type": "string" },
            "balance": { "type": "number" },
            "transactions": { "type": "array", "items": { "type": "object" } },
            "last_updated": { "type": "string", "format": "date-time" }
        },
        "required": ["uid", "balance"]
    },
    "AiRequest": {
        "title": "AI Request",
        "description": "A record of a user's request to the AI orchestration engine.",
        "type": "object",
        "properties": {
            "uid": { "type": "string" },
            "type": { "type": "string", "enum": ["text", "image", "video", "audio", "call", "sign"] },
            "input": { "type": "string" },
            "options": { "type": "object" },
            "vendor_used": { "type": "string" },
            "cost": { "type": "number" },
            "price_charged": { "type": "number" },
            "status": { "type": "string", "enum": ["pending", "running", "success", "failed"] },
            "output_url": { "type": "string", "format": "uri" },
            "error": { "type": "string" },
            "createdAt": { "type": "string", "format": "date-time" },
            "updatedAt": { "type": "string", "format": "date-time" }
        },
        "required": ["uid", "type", "input", "status"]
    },
    "VendorMetric": {
        "title": "Vendor Metric",
        "description": "Performance and cost metrics for a single AI vendor.",
        "type": "object",
        "properties": {
            "vendor_name": { "type": "string" },
            "avg_cost": { "type": "number" },
            "success_rate": { "type": "number" },
            "latency_ms": { "type": "number" },
            "last_used": { "type": "string", "format": "date-time" }
        },
        "required": ["vendor_name"]
    },
    "ProfitTracking": {
        "title": "Profit Tracking Record",
        "description": "A record of revenue, cost, and profit for a single transaction.",
        "type": "object",
        "properties": {
            "uid": { "type": "string" },
            "vendor": { "type": "string" },
            "revenue": { "type": "number" },
            "cost": { "type": "number" },
            "profit": { "type": "number" },
            "createdAt": { "type": "string", "format": "date-time" }
        },
        "required": ["uid", "vendor", "revenue", "cost", "profit"]
    },
    "MemoryContext": {
        "title": "User Memory Context",
        "description": "Stores conversation history and context for a user.",
        "type": "object",
        "properties": {
            "uid": { "type": "string" },
            "context_data": { "type": "object" },
            "last_interaction": { "type": "string", "format": "date-time" }
        },
        "required": ["uid"]
    }
  },
  "auth": {
    "providers": [
      "google.com",
      "password",
      "phone"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{uid}",
        "definition": { "schema": { "$ref": "#/entities/UserProfile" }, "description": "Stores user profiles." }
      },
      {
        "path": "/wallet/{uid}",
        "definition": { "schema": { "$ref": "#/entities/Wallet" }, "description": "Stores user wallet information." }
      },
      {
        "path": "/ai_requests/{requestId}",
        "definition": { "schema": { "$ref": "#/entities/AiRequest" }, "description": "Logs all AI requests." }
      },
      {
        "path": "/vendor_metrics/{vendorName}",
        "definition": { "schema": { "$ref": "#/entities/VendorMetric" }, "description": "Aggregated metrics for AI vendors." }
      },
      {
        "path": "/profit_tracking/{transactionId}",
        "definition": { "schema": { "$ref": "#/entities/ProfitTracking" }, "description": "Tracks profit on a per-request basis." }
      },
      {
        "path": "/memory_context/{uid}",
        "definition": { "schema": { "$ref": "#/entities/MemoryContext" }, "description": "Stores long-term memory for user interactions." }
      }
    ]
  }
}
